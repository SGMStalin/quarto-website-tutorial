[
  {
    "objectID": "Unidad1.html",
    "href": "Unidad1.html",
    "title": "Unidad 1: Primeros pasos con SIG’s",
    "section": "",
    "text": "library(sf)"
  },
  {
    "objectID": "Unidad1.html#actividad-1.-ubiación-espacial",
    "href": "Unidad1.html#actividad-1.-ubiación-espacial",
    "title": "Unidad 1: Primeros pasos con SIG’s",
    "section": "Actividad 1. Ubiación espacial",
    "text": "Actividad 1. Ubiación espacial\nAbra el mapa de OpenStreetMap en el explorador de Internet. Elija una entidad de la ciudad e intente describir en palabras las propiedades espaciales y atributos.\nEntidad espacial: Parque Calderón\nSe encuentra al sur del Ecuador, en la ciudad de Cuenca, en el centro de la ciudad. En las calles Benigno Malo, Simón Bolívar, Luis Cordero y Mariscal Sucre.\nAtributos: - Forma: Poligonal - Categoría: Zona de recreación - Área aproximada: 100m\\(^2\\)"
  },
  {
    "objectID": "Unidad1.html#actividad-2.-escalas-y-mediciones",
    "href": "Unidad1.html#actividad-2.-escalas-y-mediciones",
    "title": "Unidad 1: Primeros pasos con SIG’s",
    "section": "Actividad 2. Escalas y mediciones",
    "text": "Actividad 2. Escalas y mediciones\n\n(En google earth) Acérquese al campus Balzay lo suficiente hasta que la barra de escala muestre “100m”. Luego mide el largo del techo del “Bloque B” (Aulario): ¿Cuál es la longitud del edificio según lo que midió?\n\n84.04m\n\nAcérquese al campus Balzay lo suficiente hasta que la barra de escala muestre “10m”. Luego mida el largo del techo del “Bloque B” (Aulario): ¿Cuál es la longitud del edificio según lo que midió?\n\n85.43m\n\n¿Hay diferencias entre las medidas de uno y otro?¿Por qué?\n\nLa precisón es mayor a medida que la escala es mayor, al inicio no eran tan fácil distinguir entre los límites del edificio. Sin embargo, con una mayor escala, se pudo distinguir mejor estos límites."
  },
  {
    "objectID": "Unidad1.html#actividad-3.-sistemas-de-referencia-de-coordenadas-georreferenciación",
    "href": "Unidad1.html#actividad-3.-sistemas-de-referencia-de-coordenadas-georreferenciación",
    "title": "Unidad 1: Primeros pasos con SIG’s",
    "section": "Actividad 3. Sistemas de Referencia de Coordenadas (Georreferenciación)",
    "text": "Actividad 3. Sistemas de Referencia de Coordenadas (Georreferenciación)\nCompare el resultado de los Bloques 1 y 2. ¿Qué nota de diferente entre ambos resultados? ¿A qué cree que se debe?\nImportamos los datos que vienen por defecto en el paquete sf\n\ndatos <- system.file(\"shape/nc.shp\", package=\"sf\") |> \n  st_read(quiet = TRUE) |> head(6) |>\n  st_centroid()\n\n\nBloque 1\n\n\n# Bloque 1\ndatos |> st_transform(3857) |> st_geometry() |> st_as_text()\n\n[1] \"POINT (-9072322 4360161)\" \"POINT (-9030787 4368427)\"\n[3] \"POINT (-8981871 4357552)\" \"POINT (-8463269 4356810)\"\n[5] \"POINT (-8617259 4358915)\" \"POINT (-8570978 4350488)\"\n\n\n\nBloque 2\n\n\n# Bloque 2\ndatos |> st_transform(4326) |> st_geometry() |> st_as_text()\n\n[1] \"POINT (-81.49806 36.43152)\" \"POINT (-81.12494 36.49124)\"\n[3] \"POINT (-80.68552 36.41266)\" \"POINT (-76.02684 36.4073)\" \n[5] \"POINT (-77.41016 36.42251)\" \"POINT (-76.99441 36.36158)\"\n\n\nLas coordenadas se están representando diferente, esto se a la transformación que se realiza, en el bloque A utilizamos un epsg: 3857 y en el segundo bloque un epsg: 4326."
  },
  {
    "objectID": "Unidad1.html#actividad-4.-sistema-de-coordenadas",
    "href": "Unidad1.html#actividad-4.-sistema-de-coordenadas",
    "title": "Unidad 1: Primeros pasos con SIG’s",
    "section": "Actividad 4. Sistema de coordenadas",
    "text": "Actividad 4. Sistema de coordenadas\nEl estadio universitario de la UCE se encuentra en las coordenadas: (0.2018894 S, 78.5041430 W)\n\nCual es el valor de Latitud?\n\n0.2018894\n\nCual es el valor de Longitud?\n\n78.5041430\n\nExpresar esa coordenada en grados minutos y segundos.\n\n\nlat <- 0.2018894\nlon <- 78.5041430\n\nY = paste(0, \"°\", round(lat*60), \"'\", round(((lat*60)%%1)*60, 2), \"\\\"\")\nX = paste(78, \"°\", round((lon%%1)*60), \"'\", round(((lon*60)%%1)*60, 2), \"\\\"\")\n\ncoordenada en X: 78 ° 30 ’ 14.91 “; coordenada en Y: 0 ° 12 ’ 6.8”\n\nHalle la coordenada en la carta mostrada\n\n\nPara hallar la solución: 1° = 60’ = 3600”\n\n\n\n\nEstadio de la Universidad de Cuenca"
  },
  {
    "objectID": "Unidad1.html#actividad-5.-codificación-de-src",
    "href": "Unidad1.html#actividad-5.-codificación-de-src",
    "title": "Unidad 1: Primeros pasos con SIG’s",
    "section": "Actividad 5. Codificación de SRC",
    "text": "Actividad 5. Codificación de SRC\nAbra la aplicación web de Google Earth e intente localizar la siguiente coordenada:\nValor 1: 9988610.51 Valor 2: 212665.41.\nLe sugiero que haga todas las preguntas necesarias para poder resolver este reto.\n\nSe realizó la conversión de coordenadas a geográfias, en donde se obtuvo las siguientes:\n\n\nlatitud: -0.10293\nlongitud: -77.58133\n\n¿Qué muestra el mapa en este lugar?\nAparentemente el punto muestra la ubicación de la cascada de San Rafael."
  },
  {
    "objectID": "Unidad2.html",
    "href": "Unidad2.html",
    "title": "Unidad 2: Exploración de Información Espacial",
    "section": "",
    "text": "Visualización de capas de vectores\n\nCargando datos en capas vectoriales\nExplorando atributos y valores\nSelección de entidades: Consultas y motor de búsqueda\nEstilos y etiquetas de capas vectoriales.\nEjercicios prácticos\n\n\n\n\n\nlibrary(sf)\nlibrary(tidyverse)\nlibrary(tmap)\nlibrary(raster)\n\n\n\n\nA partir del fichero “data/gpkg/estaciones_inamhi.gpkg”, cargue la capa “Estaciones meteorologicas”\n\ninamhi_stat <- st_read(\"data/gpkg/estaciones_inamhi.gpkg\", layer = \"Estaciones meteorologicas\")\n\nReading layer `Estaciones meteorologicas' from data source \n  `/home/sgmstalin/Documents/git/r-spatial_activities/data/gpkg/estaciones_inamhi.gpkg' \n  using driver `GPKG'\nSimple feature collection with 138 features and 8 fields\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: -89.61431 ymin: -4.584722 xmax: -75.39611 ymax: 1.305833\nGeodetic CRS:  WGS 84\n\n\nExplore los datos cargados e intente responder las siguientes preguntas:\n\n¿Cuál es el la extensión máxima que alcanza la capa?\n\n\nst_bbox(inamhi_stat)\n\n      xmin       ymin       xmax       ymax \n-89.614306  -4.584722 -75.396111   1.305833 \n\n\n\n¿Cuál es el CRS de la capa?\n\n\nst_crs(inamhi_stat)\n\nCoordinate Reference System:\n  User input: WGS 84 \n  wkt:\nGEOGCRS[\"WGS 84\",\n    DATUM[\"World Geodetic System 1984\",\n        ELLIPSOID[\"WGS 84\",6378137,298.257223563,\n            LENGTHUNIT[\"metre\",1]]],\n    PRIMEM[\"Greenwich\",0,\n        ANGLEUNIT[\"degree\",0.0174532925199433]],\n    CS[ellipsoidal,2],\n        AXIS[\"geodetic latitude (Lat)\",north,\n            ORDER[1],\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\n        AXIS[\"geodetic longitude (Lon)\",east,\n            ORDER[2],\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\n    USAGE[\n        SCOPE[\"Horizontal component of 3D system.\"],\n        AREA[\"World.\"],\n        BBOX[-90,-180,90,180]],\n    ID[\"EPSG\",4326]]\n\n\n\n¿Cómo se llama la estación que tiene el Código INAMHI M0033?\n\n\ninamhi_stat[inamhi_stat$Codigo == \"M0033\", c(\"Codigo\", \"Nombre\")] |> \n  st_drop_geometry()\n\n   Codigo            Nombre\n11  M0033 LOJA - LA ARGELIA\n\n\n\nVisualice los datos en un mapa.\n\n\ntmap_mode(\"view\")\nqtm(inamhi_stat, symbols.col = \"Estado\")\n\n\n\n\n\n\n\n\n\n\nEn su documento de Rmd escriba el código para cargar los datos de la capa “data/gpkg/muestreo.gpkg: Puntos de muestreo” y cargar la capa “data/gpkg/muestreo.gpkg: Demarcación hidrológica Santiago)\n\nsamp_points <- st_read(\"data/gpkg/muestreo.gpkg\", layer = \"Puntos de muestreo\")\n\nReading layer `Puntos de muestreo' from data source \n  `/home/sgmstalin/Documents/git/r-spatial_activities/data/gpkg/muestreo.gpkg' \n  using driver `GPKG'\nSimple feature collection with 483 features and 5 fields\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: 665639.2 ymin: 9596060 xmax: 807144.7 ymax: 9724872\nProjected CRS: WGS 84 / UTM zone 17S\n\ndhs <- st_read(\"data/gpkg/muestreo.gpkg\", layer = \"Demarcacion hidrogafica Santiago\")\n\nReading layer `Demarcacion hidrogafica Santiago' from data source \n  `/home/sgmstalin/Documents/git/r-spatial_activities/data/gpkg/muestreo.gpkg' \n  using driver `GPKG'\nSimple feature collection with 1 feature and 3 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 674823.6 ymin: 9445912 xmax: 924089.7 ymax: 9782338\nProjected CRS: WGS 84 / UTM zone 17S\n\n\nUsando las herramientas hasta ahora aprendidas intente responder las siguientes preguntas:\n\n¿Cuál es el promedio de temperatura del aire de los puntos de muestreo que están bajo la cota de 1000 m?\n\n\nsubset(samp_points, Altitud < 1000) %>%\n  .$ta_media |> mean()\n\n[1] 23.86154\n\n\n\nSin repetir el procedimiento para la pregunta anterior, encuentre el promedio y desviación estándar para los puntos de muestreo que sobrepasan el umbral de 50% de Porcentaje de bosque en el 2010.\n\n\nsamp_points |>\n  group_by(per = Forest_P_2010 > 50) |>\n  summarise(\n    ta_mean = mean(ta_media, na.rm = T),\n    ta_sd = mean(ta_media, na.rm = T)\n    )\n\nSimple feature collection with 2 features and 3 fields\nGeometry type: MULTIPOINT\nDimension:     XY\nBounding box:  xmin: 665639.2 ymin: 9596060 xmax: 807144.7 ymax: 9724872\nProjected CRS: WGS 84 / UTM zone 17S\n# A tibble: 2 × 4\n  per   ta_mean ta_sd                                                       geom\n  <lgl>   <dbl> <dbl>                                           <MULTIPOINT [m]>\n1 FALSE    14.9  14.9 ((665639.2 9705882), (665825.7 9708518), (665980.1 964483…\n2 TRUE     19.5  19.5 ((735159.8 9614194), (736043.8 9596799), (736190.9 960013…\n\n\n\n¿Cuántos puntos de muestreo existen en el área que cubre la Demarcación hidrológica Santiago?\n\n\nsamp_in_dhs <- samp_points[st_intersects(samp_points, dhs, sparse = F), ]\n\nnrow(samp_in_dhs)\n\n[1] 294\n\n\n\nA partir de los puntos seleccionados, ¿Cuál es la extensión máxima de la selección?\n\n\nst_bbox(samp_in_dhs)\n\n     xmin      ymin      xmax      ymax \n 685367.5 9596060.1  807144.7 9724693.7 \n\n\n\n\n\n\nUsando datos de la capa “data/gpkg/muestreo.gpkg: Puntos de muestreo” y la Demarcación Hidrográfica del Río Santiago.\n\nSeleccione los puntos que pertenezcan a la Cuenca y que estén a más de 2800 msnm.\n\n\nsamp_points$in_dhs <- st_intersects(samp_points, dhs, sparse = F) & \n  samp_points$Altitud > 2800\n\n\nGrafique los puntos esos con color azul y sobre el polígono de la Cuenca.\nLos demás puntos grafiquelos con un color gris claro y con otra forma diferent\n\n\nqtm(dhs, fill = \"grey30\") +\n  tm_shape(samp_points) +\n  tm_dots(\n    col = \"in_dhs\", palette = c(\"TRUE\" = 'darkblue', \"FALSE\" = 'grey75'), title = \"Conditions?\"\n  )"
  },
  {
    "objectID": "Unidad2.html#actividad-4.-exploración-de-capas-raster",
    "href": "Unidad2.html#actividad-4.-exploración-de-capas-raster",
    "title": "Unidad 2: Exploración de Información Espacial",
    "section": "Actividad 4. Exploración de capas raster",
    "text": "Actividad 4. Exploración de capas raster\ngenere los resultados y respuestas de las siguientes preguntas:\nCargue las capas “temperatura_2.tif” y “dem200.tif”. Las dos capas representan la temperatura media para un mes normal de Enero en Ecuador continental y la Altitud correspondiente. Ahora:\n\nat_ec <- raster(\"data/tif/Temperatura_2.tif\")\ndem <- raster(\"data/tif/dem200s.tif\")\n\n\nplot(at_ec)\nplot(dem)\n\n\n\n\n\n\n\n\n\n\n\n\nIntente encontrar alguna diferencia entre las propiedades de ambos rasters:\n\nPropiedades del raster de temperatura\n\nc(ncol(at_ec), nrow(at_ec), ncell(at_ec), nlayers(at_ec))\n\n[1]     3245     3578 11610610        1\n\nres(at_ec)\n\n[1] 200 200\n\ncrs(at_ec)\n\nCoordinate Reference System:\nDeprecated Proj.4 representation:\n +proj=utm +zone=17 +south +datum=WGS84 +units=m +no_defs \nWKT2 2019 representation:\nPROJCRS[\"unknown\",\n    BASEGEOGCRS[\"unknown\",\n        DATUM[\"World Geodetic System 1984\",\n            ELLIPSOID[\"WGS 84\",6378137,298.257223563,\n                LENGTHUNIT[\"metre\",1]],\n            ID[\"EPSG\",6326]],\n        PRIMEM[\"Greenwich\",0,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8901]]],\n    CONVERSION[\"UTM zone 17S\",\n        METHOD[\"Transverse Mercator\",\n            ID[\"EPSG\",9807]],\n        PARAMETER[\"Latitude of natural origin\",0,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8801]],\n        PARAMETER[\"Longitude of natural origin\",-81,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8802]],\n        PARAMETER[\"Scale factor at natural origin\",0.9996,\n            SCALEUNIT[\"unity\",1],\n            ID[\"EPSG\",8805]],\n        PARAMETER[\"False easting\",500000,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8806]],\n        PARAMETER[\"False northing\",10000000,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8807]],\n        ID[\"EPSG\",17017]],\n    CS[Cartesian,2],\n        AXIS[\"(E)\",east,\n            ORDER[1],\n            LENGTHUNIT[\"metre\",1,\n                ID[\"EPSG\",9001]]],\n        AXIS[\"(N)\",north,\n            ORDER[2],\n            LENGTHUNIT[\"metre\",1,\n                ID[\"EPSG\",9001]]]] \n\nextent(at_ec)\n\nclass      : Extent \nxmin       : 498760.1 \nxmax       : 1147760 \nymin       : 9445216 \nymax       : 10160816 \n\n\nPropiedades del raster DEM\n\nc(ncol(dem), nrow(dem), ncell(dem), nlayers(dem))\n\n[1]     3245     3578 11610610        1\n\nres(dem)\n\n[1] 200 200\n\ncrs(dem)\n\nCoordinate Reference System:\nDeprecated Proj.4 representation:\n +proj=utm +zone=17 +south +datum=WGS84 +units=m +no_defs \nWKT2 2019 representation:\nPROJCRS[\"unknown\",\n    BASEGEOGCRS[\"unknown\",\n        DATUM[\"World Geodetic System 1984\",\n            ELLIPSOID[\"WGS 84\",6378137,298.257223563,\n                LENGTHUNIT[\"metre\",1]],\n            ID[\"EPSG\",6326]],\n        PRIMEM[\"Greenwich\",0,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8901]]],\n    CONVERSION[\"UTM zone 17S\",\n        METHOD[\"Transverse Mercator\",\n            ID[\"EPSG\",9807]],\n        PARAMETER[\"Latitude of natural origin\",0,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8801]],\n        PARAMETER[\"Longitude of natural origin\",-81,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8802]],\n        PARAMETER[\"Scale factor at natural origin\",0.9996,\n            SCALEUNIT[\"unity\",1],\n            ID[\"EPSG\",8805]],\n        PARAMETER[\"False easting\",500000,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8806]],\n        PARAMETER[\"False northing\",10000000,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8807]],\n        ID[\"EPSG\",17017]],\n    CS[Cartesian,2],\n        AXIS[\"(E)\",east,\n            ORDER[1],\n            LENGTHUNIT[\"metre\",1,\n                ID[\"EPSG\",9001]]],\n        AXIS[\"(N)\",north,\n            ORDER[2],\n            LENGTHUNIT[\"metre\",1,\n                ID[\"EPSG\",9001]]]] \n\nextent(dem)\n\nclass      : Extent \nxmin       : 498760.1 \nxmax       : 1147760 \nymin       : 9445216 \nymax       : 10160816 \n\n\n\nRespuesta: Como se puede apreciar en los resultados, no existe diferencias en las propiedades del raster\n\n\nCargue las capas “modis_perc_bosque_*.tif”_ y descubra en qué se diferencia con la capa de temperatura.\n\n\nmodis_2000 <- raster(\"data/tif/modis_perc_bosque_2000.tif\")\nmodis_2010 <- raster(\"data/tif/modis_perc_bosque_2010.tif\")\n\n\nplot(modis_2000)\nplot(modis_2010)\n\n\n\n\n\n\n\n\n\n\n\nPropiedades de la capa Modis 2000\n\nc(ncol(modis_2000), nrow(modis_2000), ncell(modis_2000), nlayers(modis_2000))\n\n[1]    700    916 641200      1\n\nres(modis_2000)\n\n[1] 10820.40 10823.33\n\ncrs(modis_2000)\n\nCoordinate Reference System:\nDeprecated Proj.4 representation:\n +proj=merc +a=6378137 +b=6378137 +lat_ts=0 +lon_0=0 +x_0=0 +y_0=0 +k=1\n+units=m +nadgrids=@null +wktext +no_defs \nWKT2 2019 representation:\nPROJCRS[\"WGS 84 / Pseudo-Mercator\",\n    BASEGEOGCRS[\"WGS 84\",\n        DATUM[\"World Geodetic System 1984\",\n            ELLIPSOID[\"WGS 84\",6378137,298.257223563,\n                LENGTHUNIT[\"metre\",1]]],\n        PRIMEM[\"Greenwich\",0,\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\n        ID[\"EPSG\",4326]],\n    CONVERSION[\"unnamed\",\n        METHOD[\"Popular Visualisation Pseudo Mercator\",\n            ID[\"EPSG\",1024]],\n        PARAMETER[\"Latitude of natural origin\",0,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8801]],\n        PARAMETER[\"Longitude of natural origin\",0,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8802]],\n        PARAMETER[\"False easting\",0,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8806]],\n        PARAMETER[\"False northing\",0,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8807]]],\n    CS[Cartesian,2],\n        AXIS[\"(E)\",east,\n            ORDER[1],\n            LENGTHUNIT[\"metre\",1,\n                ID[\"EPSG\",9001]]],\n        AXIS[\"(N)\",north,\n            ORDER[2],\n            LENGTHUNIT[\"metre\",1,\n                ID[\"EPSG\",9001]]]] \n\nextent(modis_2000)\n\nclass      : Extent \nxmin       : -10664938 \nxmax       : -3090655 \nymin       : -8384256 \nymax       : 1529914 \n\n\nPropiedades de la capa Modis 2010\n\nc(ncol(modis_2010), nrow(modis_2010), ncell(modis_2010), nlayers(modis_2010))\n\n[1]    700    916 641200      1\n\nres(modis_2010)\n\n[1] 10820.40 10823.33\n\ncrs(modis_2010)\n\nCoordinate Reference System:\nDeprecated Proj.4 representation:\n +proj=merc +a=6378137 +b=6378137 +lat_ts=0 +lon_0=0 +x_0=0 +y_0=0 +k=1\n+units=m +nadgrids=@null +wktext +no_defs \nWKT2 2019 representation:\nPROJCRS[\"WGS 84 / Pseudo-Mercator\",\n    BASEGEOGCRS[\"WGS 84\",\n        DATUM[\"World Geodetic System 1984\",\n            ELLIPSOID[\"WGS 84\",6378137,298.257223563,\n                LENGTHUNIT[\"metre\",1]]],\n        PRIMEM[\"Greenwich\",0,\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\n        ID[\"EPSG\",4326]],\n    CONVERSION[\"unnamed\",\n        METHOD[\"Popular Visualisation Pseudo Mercator\",\n            ID[\"EPSG\",1024]],\n        PARAMETER[\"Latitude of natural origin\",0,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8801]],\n        PARAMETER[\"Longitude of natural origin\",0,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8802]],\n        PARAMETER[\"False easting\",0,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8806]],\n        PARAMETER[\"False northing\",0,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8807]]],\n    CS[Cartesian,2],\n        AXIS[\"(E)\",east,\n            ORDER[1],\n            LENGTHUNIT[\"metre\",1,\n                ID[\"EPSG\",9001]]],\n        AXIS[\"(N)\",north,\n            ORDER[2],\n            LENGTHUNIT[\"metre\",1,\n                ID[\"EPSG\",9001]]]] \n\nextent(modis_2010)\n\nclass      : Extent \nxmin       : -10664938 \nxmax       : -3090655 \nymin       : -8384256 \nymax       : 1529914 \n\n\n\nRespuesta: Las raster Modis_* tiene un CRS diferente al de temperatura. epsg: 3857 vs epsg: 32717.\n\n\nExplore las capas de porcentaje de bosque (“modis_perc_bosque_*.tif”) mediante histogramas. Visualmente, ¿Hacia qué lado del histograma se agrupan los valores?\n\n\nhist(modis_2000)\nhist(modis_2010)\n\n\n\n\n\n\n\n\n\n\n\n\nRespuesta: Se agrupan tanto en valores bajos como en valores altos, dejando una concavidad en los valores medios."
  },
  {
    "objectID": "Unidad2.html#actividad-5.-visualización-de-capas-raster",
    "href": "Unidad2.html#actividad-5.-visualización-de-capas-raster",
    "title": "Unidad 2: Exploración de Información Espacial",
    "section": "Actividad 5. Visualización de capas raster",
    "text": "Actividad 5. Visualización de capas raster\n\nGenere un mapa de la capa de temperatura, con un estilo de gradiente de color, cuya escala se muestre azul (más bajos) a rojo (más alto)\n\n\ntm_shape(at_ec) +\n  tm_raster(col = \"Temperatura_2\", palette = \"-RdBu\", midpoint = 15)\n\n\n\n\n\n\nUsando los límites de 18 y 25 ºC, grafique la capa de temperatura como tres clases con distinto color único para cada rango.\n\n\nreclassify(\n  at_ec, matrix(\n    c(-Inf, 18, 18,\n      18, 25, 20,\n      25, Inf, 25)\n  )\n) |>\n  tm_shape() +\n  tm_raster()\n\n\n\n\n\n\nCarge las capas “clip_RT_LC08_L1TP….tif”. Genere una sola figura con mapas estilo multi-banda: Composición 4-3-2, y Composición 7-6-4\n\n\nlc_f <- list.files(\"data/tif\", pattern = \"clip_RT\", full.names = T)\n\nbname <- lc_f |> basename() |> str_extract(\"B[:digit:]\")\n\n\ncomp432 <- raster::stack(\n  lc_f[3], lc_f[2], lc_f[1]\n)\nnames(comp432) <- bname[c(3,2,1)]\n\ncomp764 <- raster::stack(\n  lc_f[6], lc_f[5], lc_f[3]\n)\nnames(comp764) <- bname[c(6,5,3)]\n\n\nplotRGB(comp432, stretch = \"lin\")\nplotRGB(comp764, stretch = \"lin\")"
  },
  {
    "objectID": "Unidad2.html#actividad-6.-cargando-datos-estructurados-no-espaciales",
    "href": "Unidad2.html#actividad-6.-cargando-datos-estructurados-no-espaciales",
    "title": "Unidad 2: Exploración de Información Espacial",
    "section": "Actividad 6. Cargando datos estructurados no espaciales",
    "text": "Actividad 6. Cargando datos estructurados no espaciales\nUsando las herramientas aprendidas, calcule el promedio de temperatura anual para cada codigo y despliegue el resultado como un mapa. Para esta actividad requerirá los datos de los ficheros CSV, siguientes:\n\ndt_month <- read_csv(\"data/csv/datos_mensuales.csv\", na = \"-9999\")\n\n\nPromedio anual\n\n\nat_monh <- dt_month |> \n  mutate(at_avg = rowMeans(cbind(Tax, Tan), na.rm = T)) |> \n  group_by(codigo) |>\n  summarise(at = mean(at_avg, na.rm = T))\n\n\nUnión con estaciones\n\n\nread_csv(\"data/csv/estaciones_meteorologicas.csv\") |>\n  st_as_sf(coords = c(\"lon\", \"lat\"), crs = 4326) |> \n  inner_join(at_monh, by = \"codigo\") |> \n  qtm(symbols.col = \"at\", title = \"Temperatura media anual\")"
  },
  {
    "objectID": "Unidad3.html",
    "href": "Unidad3.html",
    "title": "Unidad 3: Álgebra de Mapas y Geoprocesamiento",
    "section": "",
    "text": "La tabla de atributos\nHerramientas de cálculo\n\nFunciones y variables\n\nTrabajo con las geometrías\nConversión de geometrías\nConversión de modelos: raster <-> vector\n\n\n\n\nlibrary(sf)\nlibrary(tidyverse)\nlibrary(tmap)\nlibrary(raster)\nlibrary(mapedit)\nlibrary(magrittr)\nlibrary(stars)\nlibrary(units)\n\n\n\n\n\nCargue las capas ocurrencias y Mask del fichero data/gpkg/tapir.gpkg\n\n\ntapir_mask <- st_read(\"data/gpkg/tapir.gpkg\", layer = \"mask\")\ntapir_ocu <- st_read(\"data/gpkg/tapir.gpkg\", layer = \"ocurrencias\")\n\n\nExplore los datos y determine qué tipo de dato es cada campo.\n\n\nglimpse(tapir_mask)\n\nRows: 1\nColumns: 2\n$ Name <chr> NA\n$ geom <MULTIPOLYGON [°]> MULTIPOLYGON (((-81.47795 -...\n\n\n\nPara el caso de mask, solo tiene un campo y es tipo character\n\n\nglimpse(tapir_ocu)\n\nRows: 155\nColumns: 7\n$ Especie    <chr> \"Tpinchaque\", \"Tpinchaque\", \"Tpinchaque\", \"Tpinchaque\", \"Tp…\n$ Confirmado <lgl> TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE,…\n$ timestamp  <dttm> 2008-08-18 09:48:42, 2009-09-29 19:37:12, 2009-02-12 19:47…\n$ Longitud   <chr> \"78º 21' 24.12\\\" W\", \"77º 34' 24.13\\\" W\", \"77º 32' 54.13\\\" …\n$ Latitud    <chr> \"0º 40' 38.24\\\" N\", \"2º 15' 8.24\\\" N\", \"2º 11' 38.26\\\" N\", …\n$ zona_UTM   <chr> \"18N\", \"18N\", \"18N\", \"18N\", \"18N\", \"18N\", \"18N\", \"18N\", \"18…\n$ geom       <POINT [°]> POINT (-77.6433 0.67729), POINT (-76.42663 2.25229), …\n\n\n\nLa capa de ocurrencias presenta 6 campos y en su mayoría son characters, también hay logical y datetime.\n\n\n¿Que sistema de coordenadas tienen las capas?\n\n\nLa capa de mask, tiene un epsg: 4326, mientras que la capa ocurrencias, tiene un epsg: 4326.\n\n\n¿Qué tipos de operaciones se pueden hacer con esos tipos de datos?\n\n\nCon la columna tipo logical se puede realizar operaciones booleanas, somo sumar los verdaderos. Con las fechas probablemente una diferencia de fechas o conteo por un período de tiempo (e.g. por meses), una operación similar se podría hacer por Especie.\n\n\n\n\n\nUsando las capas del fichero “data/gpkg/muestreo.gpkg”:\n\nmuestreo <- st_read(\"data/gpkg/muestreo.gpkg\")\n\n\nAgregar una columna que contenga las coordenadas X y Y en el SRC UTM-17S.\n\n\nmuestreo$X <- st_coordinates(muestreo)[, \"X\"]\nmuestreo$Y <- st_coordinates(muestreo)[, \"Y\"]\n\nknitr::kable(head(muestreo))\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nid\nta_media\nAltitud\nForest_P_2010\nForest_P_2000\ngeom\nX\nY\n\n\n\n\n0\n11.6\n3513.165\n22.5325\n18.28994\nPOINT (763860.6 9677462)\n763860.6\n9677462\n\n\n1\n18.8\n1899.906\n43.8950\n25.13772\nPOINT (746943.6 9598100)\n746943.6\n9598100\n\n\n2\n18.8\n1937.868\n26.9850\n9.45509\nPOINT (749704.4 9644103)\n749704.4\n9644103\n\n\n3\n16.9\n2144.949\n37.0575\n24.38037\nPOINT (732393.7 9612334)\n732393.7\n9612334\n\n\n4\n11.8\n3073.430\n37.7225\n38.11243\nPOINT (675170.9 9598945)\n675170.9\n9598945\n\n\n5\n15.2\n2740.981\n36.6025\n20.14110\nPOINT (779156.3 9688753)\n779156.3\n9688753\n\n\n\n\n\n\nAgregar una columna nueva que contenga los pesos ficticios entre 70 y 120 kg, asignados de manera aleatoria a cada registro\n\n\nmuestreo$Weight <- sample(70:120, size = nrow(muestreo), replace = T)\n\nknitr::kable(head(muestreo))\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nid\nta_media\nAltitud\nForest_P_2010\nForest_P_2000\ngeom\nX\nY\nWeight\n\n\n\n\n0\n11.6\n3513.165\n22.5325\n18.28994\nPOINT (763860.6 9677462)\n763860.6\n9677462\n96\n\n\n1\n18.8\n1899.906\n43.8950\n25.13772\nPOINT (746943.6 9598100)\n746943.6\n9598100\n111\n\n\n2\n18.8\n1937.868\n26.9850\n9.45509\nPOINT (749704.4 9644103)\n749704.4\n9644103\n103\n\n\n3\n16.9\n2144.949\n37.0575\n24.38037\nPOINT (732393.7 9612334)\n732393.7\n9612334\n107\n\n\n4\n11.8\n3073.430\n37.7225\n38.11243\nPOINT (675170.9 9598945)\n675170.9\n9598945\n108\n\n\n5\n15.2\n2740.981\n36.6025\n20.14110\nPOINT (779156.3 9688753)\n779156.3\n9688753\n84\n\n\n\n\n\n\nAgregar una columna nueva que contenga la zona UTM a la que pertenecen\n\n\nGetUtmZone = function(x){\n  centroid = st_centroid(x)\n  longitude = st_coordinates(centroid)[,1]\n  latitude = st_coordinates(centroid)[,2]\n  zone_number = floor(((longitude + 180) / 6) %% 60) + 1\n  zone_letter = ifelse(latitude >= 0,\n                    'N', #if true\n                    'S') #else\n  return(paste0(zone_number, zone_letter))\n}\n\nmuestreo$Zone <- st_transform(muestreo, 4326) |> st_geometry() |> GetUtmZone()\n\nknitr::kable(head(muestreo))\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nid\nta_media\nAltitud\nForest_P_2010\nForest_P_2000\ngeom\nX\nY\nWeight\nZone\n\n\n\n\n0\n11.6\n3513.165\n22.5325\n18.28994\nPOINT (763860.6 9677462)\n763860.6\n9677462\n96\n17S\n\n\n1\n18.8\n1899.906\n43.8950\n25.13772\nPOINT (746943.6 9598100)\n746943.6\n9598100\n111\n17S\n\n\n2\n18.8\n1937.868\n26.9850\n9.45509\nPOINT (749704.4 9644103)\n749704.4\n9644103\n103\n17S\n\n\n3\n16.9\n2144.949\n37.0575\n24.38037\nPOINT (732393.7 9612334)\n732393.7\n9612334\n107\n17S\n\n\n4\n11.8\n3073.430\n37.7225\n38.11243\nPOINT (675170.9 9598945)\n675170.9\n9598945\n108\n17S\n\n\n5\n15.2\n2740.981\n36.6025\n20.14110\nPOINT (779156.3 9688753)\n779156.3\n9688753\n84\n17S\n\n\n\n\n\n\nAgregue una columna nueva que contenga un identificador para los puntos que pertenecen al hemisferio sur y que caigan dentro del área que cubre la Demarcación hidrográfica Santiago\n\n\nDHS <- st_read(\n  \"data/gpkg/muestreo.gpkg\", layer = \"Demarcacion hidrogafica Santiago\",\n  quiet = T\n)\n\nmuestreo$dhs_sur <- st_intersects(muestreo, DHS, sparse = F) & muestreo$Zone == \"17S\"\n\nknitr::kable(head(muestreo))\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nid\nta_media\nAltitud\nForest_P_2010\nForest_P_2000\ngeom\nX\nY\nWeight\nZone\ndhs_sur\n\n\n\n\n0\n11.6\n3513.165\n22.5325\n18.28994\nPOINT (763860.6 9677462)\n763860.6\n9677462\n96\n17S\nTRUE\n\n\n1\n18.8\n1899.906\n43.8950\n25.13772\nPOINT (746943.6 9598100)\n746943.6\n9598100\n111\n17S\nTRUE\n\n\n2\n18.8\n1937.868\n26.9850\n9.45509\nPOINT (749704.4 9644103)\n749704.4\n9644103\n103\n17S\nTRUE\n\n\n3\n16.9\n2144.949\n37.0575\n24.38037\nPOINT (732393.7 9612334)\n732393.7\n9612334\n107\n17S\nTRUE\n\n\n4\n11.8\n3073.430\n37.7225\n38.11243\nPOINT (675170.9 9598945)\n675170.9\n9598945\n108\n17S\nFALSE\n\n\n5\n15.2\n2740.981\n36.6025\n20.14110\nPOINT (779156.3 9688753)\n779156.3\n9688753\n84\n17S\nTRUE\n\n\n\n\n\n\n\n\n\n\nCargue la librería mapedit\n\n\nlibrary(mapedit)\n\n\nEjecute la función mapedit::drawFeatures()\nAcérquese a la ciudad de Cuenca, específicamente al Parque Calderón (Parque central de Cuenca)\nTrace puntos de los 2 o 3 edificios representativos que que pueda reconocerlos fácilmente alrededor del Parque.\nTrace un rectángulo que cubra hasta tres cuadras alrededor del parque calderón.\nTrace las vías hasta dos cuadras alrededor del Parque.\nGuarde el resultado en una capa, con SRC EPSG:4326 (Latitud y Longitud).\n\n\nparque_calderon <- drawFeatures()\n\n\n\n\n\nmapdrawing\n\n\n\n\n\n\n\n\nknitr::kable(head(parque_calderon))\n\n\n\n\nX_leaflet_id\nfeature_type\ngeom\n\n\n\n\n1622\nmarker\nPOINT (-79.00394 -2.898353)\n\n\n1628\nmarker\nPOINT (-79.0053 -2.897426)\n\n\n1634\nmarker\nPOINT (-79.00459 -2.898053)\n\n\n2017\nrectangle\nPOLYGON ((-79.00741 -2.9017…\n\n\n2058\npolyline\nLINESTRING (-79.0069 -2.897…\n\n\n2082\npolyline\nLINESTRING (-79.00678 -2.89…\n\n\n\n\n\n\n\nAgregue una columna con el nombre o referencia de las vías dibujadas.\nExplore el resultado y discuta sobre las propiedades de esta capa.\n\nPara esto visualizaremos el mapa con tmap y señalaremos las ids de las vías para asignar el nombre que le corresponde:\n\ntmap_mode(\"view\")\nfilter(parque_calderon, st_geometry_type(parque_calderon) == \"LINESTRING\") |> \n  qtm()\n\n\n\n\n\n\n\nAsignación de nombres a las vías\n\n\nparque_calderon %<>%\n  mutate(\n    vias_id = case_when(\n      `X_leaflet_id` == 2358 ~ \"Gran Colombia\",\n      `X_leaflet_id` == 2082 ~ \"Simón Bolívar\",\n      `X_leaflet_id` == 2058 ~ \"Mariscal Sucre\",\n      `X_leaflet_id` == 2154 ~ \"Presidente Córdova\",\n      `X_leaflet_id` == 2174 ~ \"Juan Jaramillo\",\n      `X_leaflet_id` == 2238 ~ \"Padre Aguirre\",\n      `X_leaflet_id` == 2266 ~ \"Benigno Malo\",\n      `X_leaflet_id` == 2292 ~ \"Luis Cordero\",\n      `X_leaflet_id` == 2316 ~ \"Presidente Borrero\",\n      T ~ \"Otras entidades\"\n    )\n  )\n\n\nEs un tipo de multi-geometría, es decir tiene una mezcla de polígonos, puntos y líneas. A pesar de que R lo puede procesar, otros programas como Qgis pueden necesitar que estás geometrías estén separadas.\n\n\nSepare las entidades por geometrías y guarde como capas separadas en un fichero *.gpkg.\n\n\nfilter(parque_calderon, st_geometry_type(geometry) == \"LINESTRING\") |>\n  st_write(\"data/gpkg/parque_calderon.gpkg\", layer = \"pc_lines\")\n\nfilter(parque_calderon, st_geometry_type(geometry) == \"POINT\") |>\n  st_write(\"data/gpkg/parque_calderon.gpkg\", layer = \"pc_points\")\n\nfilter(parque_calderon, st_geometry_type(geometry) == \"POLYGON\") |>\n  st_write(\"data/gpkg/parque_calderon.gpkg\", layer = \"pc_polygons\")\n\n\n\n\n\n\nCargue la capa puntos disponible en el fichero quinta_balzay.gpkg\n\n\nquinta_balzay <- st_read(\"data/gpkg/quinta_balzay.gpkg\")\n\n\nExplore las propiedades de la capa y haga las preguntas necesarias para entender los atributos.\nGenere una o varias capas de según corresponda. Si es necesario convierta esas geometrías a geometrías más complejas.\n\n\nPara evitar que las geometrías se agrupen incorrectamente, hay que aplicar el argumento do_union = F en summarise()\n\n\nFormación de geometrías a polígonos\n\npolygons_qb <- quinta_balzay |>\n  filter(feature_type == \"polygon\") |>\n  group_by(id) |>\n  summarise(do_union = F) |> \n  st_cast(\"POLYGON\")\n\nFormación de geometrías a líneas\n\nlines_qb <- quinta_balzay |>\n  filter(feature_type == \"polyline\") |>\n  group_by(id) |>\n  summarise(do_union = F) |> \n  st_cast(\"LINESTRING\")\n\nExtracción de puntos\n\npoints_qb <- quinta_balzay |>\n  filter(feature_type == \"point\")\n\n\n\n\nqtm(polygons_qb, fill = \"id\") +\n  qtm(lines_qb) + qtm(points_qb)\n\n\n\n\n\n\n\n\nExplore los resultados y comente lo que descubrió.\n\n\nLos polígonos hacen referencia a los aularios y a las oficinas cerca de hídrica, las líneas a las vías dentros del campus balzay y los puntos a zonas importantes de la casa antigua de la quinta balzay (e.g. laboratorios).\n\n\n\n\n\n\nCargue la capa de Temperatura_3.tif y convierta las clases a polígonos\nA partir de la capa Temperatura_2.tif, genere isolíneas cada 5 grados de temperatura.\n\n\nat_3 <- raster(\"data/tif/Temperatura_3.tif\")\nat_2 <- raster(\"data/tif/Temperatura_2.tif\")\n\n\nA continuación se recorta las capa de temperatura con la de muestreo, para ahorrar tiempo en el procesamiento de las capas.\n\n\nIsolíneas cada 5 grados\n\n\nat_2_iso <- at_2 |> crop(muestreo) |> \n  cut(breaks = seq(-5, 35, 5), include.lowest = TRUE, right = FALSE) |>\n  raster::rasterToContour() |>\n  st_as_sf()\n\n\nPolígonos de las clases\n\n\nat_3_poly <- at_3 |> crop(muestreo) |> st_as_stars() |> st_as_sf(merge = T)\n\n\nqtm(at_2_iso, lines.col = \"level\")\nqtm(at_3_poly, fill = \"Temperatura_3\")\nqtm(at_3_poly, fill = \"Temperatura_3\") +\n  qtm(at_2_iso, lines.col = \"level\")"
  },
  {
    "objectID": "Unidad3.html#actividad-5.-raster-a-vector-1",
    "href": "Unidad3.html#actividad-5.-raster-a-vector-1",
    "title": "Unidad 3: Álgebra de Mapas y Geoprocesamiento",
    "section": "Actividad 5. Raster a vector",
    "text": "Actividad 5. Raster a vector\nUna laguna de interés de un estudio se ecuentra en la siguiente coordenada: POINT(-79.27317 -2.85857). Usando las capas del fichero geoprocesos.gpkg, encuentre las respuestas a las siguientes preguntas:\nCreamos el punto espacial e importamos la capa de geoprocesos.gpkg\n\nlaguna_point <- \"POINT(-79.27317 -2.85857)\" |> st_as_sfc(crs = 4326) |>\n  st_as_sf() |> st_transform(crs = 32717)\n\nwater_bodies <- st_read(\"data/gpkg/geoprocesos.gpkg\", layer = \"cuerpos de agua\") |>\n  st_transform(crs = 32717)\n\n\n¿En un radio de 6 Km desde el punto, cuántos cuerpos de agua naturales existen?\n\n\nst_is_within_distance(\n  x = laguna_point, y = water_bodies, \n  dist = units::set_units(6,\"km\"),\n  sparse=FALSE\n) %>% sum()\n\n[1] 126\n\n\n\nExisten 126 cuerpoos de agua al rededor de los 6km de la laguna de interés.\n\n\n¿Cuál es el área que cubren todos ellas?\n\n\nlag_buff <- st_buffer(laguna_point, dist = units::set_units(6, \"km\"))\n\nlag_buff |>\n  st_area() |> units::set_units(\"km^2\")\n\n113.0457 [km^2]\n\n\n\nTiene un área total de 113.05 km\\(^2\\)\n\n\n¿Cuál es el rango de temperaturas que existen en la zona de influencia? (Use la capa de Puntos de muestreo disponible en muestreo.gpkg)\n\n\nqtm(muestreo) + \n  qtm(lag_buff)\n\n\n\n\n\nmuestreo[lag_buff, ] |> pull(ta_media) |> mean()\n\n[1] 8\n\n\n\nTiene una media de 8°C\n\n\n¿Cuánto espacio del radio de 6 km, no está cubierto por cuerpos de agua?\n\n\nst_difference(\n  lag_buff, st_union(water_bodies)\n) %>% st_area() %>% \n  units::set_units(\"km^2\")\n\n106.433 [km^2]\n\n\n\nNo están cubiertos por agua 106.4 km\\(^2\\)"
  },
  {
    "objectID": "Unidad3.html#actividad-6.-álgebra-de-mapas",
    "href": "Unidad3.html#actividad-6.-álgebra-de-mapas",
    "title": "Unidad 3: Álgebra de Mapas y Geoprocesamiento",
    "section": "Actividad 6. Álgebra de mapas",
    "text": "Actividad 6. Álgebra de mapas\nEn un proyecto nuevo ya sea en QGIS o R cargue la capa temperatura_2.tif. Usando las herramientas necesarias genere una capa como la que se muestra en la imagen.\n\n\n\n\n\n\n\ntm_shape(at_2) +\n  tm_raster(\n    palette = \"-RdYlBu\", \n    midpoint = 14, \n    style = \"cont\"\n  )\n\n\n\n\n\n\n\n\nat_levs <- cut(\n  at_2, breaks = c(-Inf, -1, 5, 15, 22, 25, 50)\n)\ntm_shape(at_levs) +\n  tm_raster(palette = \"viridis\", midpoint = 3)"
  },
  {
    "objectID": "Unidad3.html#actividad-7.-álgebra-de-mapas-2",
    "href": "Unidad3.html#actividad-7.-álgebra-de-mapas-2",
    "title": "Unidad 3: Álgebra de Mapas y Geoprocesamiento",
    "section": "Actividad 7. Álgebra de mapas 2",
    "text": "Actividad 7. Álgebra de mapas 2\n**Usando los recortes de Landsat 8 (clip_RT_LC08_L1TP_010063*), calcule el NDVI para toda la zona de estudio. El NDVI se calcula mendiante la ecuación:**\n\\[\nNDVI = \\frac{NIR - Red}{NIR + Red}\n\\]\n\nImportamos los datos y necesitamos las bandas 5 y 4\n\nlc_f <- list.files(\n  \"data/tif\", pattern = \"clip_RT\", \n  full.names = T\n)\n\nCálculo de NDVI\n\nndvi_fun <- function(nir, red) {\n  (nir - red) / (nir + red)\n}\n\nndvi <- ndvi_fun(\n  nir = raster(lc_f[4]), red = raster(lc_f[3])\n)"
  },
  {
    "objectID": "Unidad4.html",
    "href": "Unidad4.html",
    "title": "Unidad 4: Interpolación espacial y Geoestadística",
    "section": "",
    "text": "Interpolación basada en métodos determinísticos\n\nVecino más cercano (Voronoi)\nInverse distance weighting (IDW)\n\nPredicción:\n\nCovariables\nModelos regresivos\n\nRegresión lineal con desface espacial\nRegresión ponderada geográficamente\n\nMétodos geoestadísticos\n\nKriging"
  },
  {
    "objectID": "Unidad4.html#bookdown-to-quarto",
    "href": "Unidad4.html#bookdown-to-quarto",
    "title": "Transition from RMarkdown",
    "section": "Bookdown to Quarto",
    "text": "Bookdown to Quarto\nConverting a Bookdown book to Quarto is slightly more involved than converting a website. A book has chapters whose order must be defined, and likely has citations and cross-refs. Still, conversion is not that hard.\nWe got some practice converting from Bookdown to Quarto by helping Gavin Fay convert his lab’s fantastic onboarding documentation, the Faylab Lab Manual. Here’s the GitHub view before and after.\nOur best first reference material for this was Nick Tierney’s Notes on Changing from Rmarkdown/Bookdown to Quarto. Nick shares some scripts in that post to automate some changes. In our case, the book was small enough that we made all changes manually. Quarto documentation was indispensable.\n\nExperimenting in a low-risk environment\nWe forked a copy of the Faylab Lab manual to the Openscapes organization, and worked in a branch so we could make changes relatively risk-free. We could always fork a new copy of the original if we “broke” something. (Caution: the default when making a pull request from a fork is to push changes to the original upstream repo, not your fork and it does this without warning if you have write-access to that repo.) With local previews it’s easy to test / play with settings to see what they do. We tended to make a change, Preview, then compare the look and functionality of the book to the original. It was helpful to comment out some elements of the configuration file _output.yml after their counterparts had been added to the Quarto configuration file _quarto.yml, or to confirm they were no longer needed, before making the drastic move of deleting them.\n\n\nThe conversion\nHere are the main steps to convert the Faylab Lab manual from Bookdown to Quarto.\nCreate new empty file called _quarto.yml and add book metadata there. The screenshots below\nSet project type as book.\nMove metadata out of index.qmd and into _quarto.yml. Title, author, and publication date were in index.qmd with date set using date: \"Last updated:r Sys.Date()\". Now these are in _quarto.yml with date set using date: last-modified. Note that having R code would require you to adjust code chunk options in the Quarto style (#|). This tripped us up a bit; see GitHub Actions.\nMove chapters listing out of _bookdown.yml and into _quarto.yml.\nAdd page footer to _quarto.yml.\nHere’s what ours looked like when we finished the steps above (_quarto.yml).\n\n\n\n\n\n\n_quarto.yml contents\n\n\n\n\n\n\n\nFaylab Lab Manual\n\n\n\n\n\nChange insertion of images from html style to Quarto style. (Note Quarto calls them “figures”, not “images”.) The following snippet will insert the GitHub octocat logo in a page:\n![](https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png){fig-align=\"left\" width=\"35px\"}\nChange all filename extensions .Rmd -> .qmd (you could Preview after this change and see that the book looks the same). Note that Quarto works with .Rmd files just as well as it does .qmd, so this change is not urgent. In fact, if you have a lot of R code in your .Rmds (unlike the Faylab Lab Manual), there will be additional tinkering needed to make the code chunks happy.\n\n\nCitations\nThe Faylab Lab Manual cited two papers, presenting us with an opportunity to see how easy it is to add references to a Quarto book. Briefly, in the Visual Editor, Insert > Citation > DOI. Pasting the DOI or its full URL, we can insert the citation. This automatically creates a references.bib file and adds the full citations at the bottom of the chapter page (watch demo). In July 2022, we had to manually add a ## References heading, but this may not be necessary in future Quarto updates.\n\n\n\n\n\n\nInsert citation via its DOI using RStudio Visual Editor\n\n\n\n\n\n\n\n\n\n\nPublishing notes\nIf the book’s output is strictly html, there’s no need to specify output-dir in _quarto.yml. The output directory default is _book/, which is what we’d like. If we wanted other types of output like like PDF or EPUB, etc. those single file outputs are also written to the output-dir (Quarto docs).\nIf you currently have a docs/ folder, delete it.\nUpdate .gitignore to ignore _book/. At the same time, we have it ignore caches and a .quarto file:\n/.quarto/\n*_cache/\n_book/\nOnce all is settled, delete _output.yml.\nOnce the Openscapes fork was fully reviewed, we made a pull request from that to the main branch of the book’s repo. Once that was merged, we set up GitHub Actions to render the book. (TODO: instructions for GitHub Actions)\n\n\nGitHub Actions\nThis book was mostly prose and screenshots without any R code. This made the conversion from RMarkdown to Quarto likely more straightforward than if you also needed to adjust code chunk options in the quarto style (#|). Our initial GitHub Action to render the converted Faylab Lab Manual failed because we had a piece of R code - even though the code was commented out! This was resolved when we deleted the line."
  },
  {
    "objectID": "Unidad4.html#distill-to-quarto",
    "href": "Unidad4.html#distill-to-quarto",
    "title": "Transition from RMarkdown",
    "section": "Distill to quarto",
    "text": "Distill to quarto\nWe transitioned our events site from distill to quarto in May 2022 (github view before and after). We followed excellent notes and examples from Nick Tierney and Danielle Navarro.\nAfter we had changed all the files, the Build tab in the RStudio IDE still showed “Build website” rather then “Render Website” and “Preview Website”, and would error when we pushed them (because that button was expecting a distill site, not a quarto site). To fix this, we updated the .Rproj file. Clicking on the .Rproj file in the RStudio IDE will open a dialog box where you can click things you want (you can also open these in a text editor or from the GitHub website to see the actual text). To fix this situation with the Build tab: Project Options > Build Tools > Project Build Tools > None.\nLooking at files /posts/_metadata.yml and _quarto.yml helps see where things are defined. For example, to make event post citations appear, we added citation: true to /posts/_metadata.yml and in _quarto.yml under the website key we set site-url: https://openscapes.github.io/events. We deleted footer.html used with distill because footer is now defined in quarto.yml.\n\nPublishing notes\n\nBackground: Our distill site had been set up to output to a docs folder, and had GitHub Settings > Pages set to look there rather gh-pages branch. (Julie note: this was a new-to-me capability when we set up the events distill site in Spring 2021 so I had forgotten that was an option). We’ve inititally kept this same set-up for now with our events page in _quarto.yml: output-dir: docs. However, this is sub-optimal; better to not have to commit and push these files but to instead have a GitHub Action generate them upon a commit. So the following is what we did -\n\nDon’t specify output-dir in _quarto.yml. The output directory default is _site/, which is what we’d like.\nIf you currently have a docs/ folder (like we did as we were experimenting), delete it.\nUpdate .gitignore to ignore _site/. At the same time, we have it ignore caches and a .quarto file:\n/.quarto/\n*_cache/\n_site/\nPush these changes, merge into main.\nOn GitHub.com, in your repo, set up GitHub publishing\nFollow instructions from the explore and setup chapter."
  },
  {
    "objectID": "Unidad4.html#troubleshooting",
    "href": "Unidad4.html#troubleshooting",
    "title": "Transition from RMarkdown",
    "section": "Troubleshooting",
    "text": "Troubleshooting\n\nGitHub Action fails, says you need RMarkdown but you don’t have R code!\nAnd you changed all .Rmds to .qmds!\nYou likely have a few setup code chunks from RMarkdown, that look like this:\n{r setup, include=FALSE}\nknitr::opts_chunk$set(echo = FALSE)\nYou can find them by opening each of your files and having a look, or use GitHub’s search for the keyword knitr"
  },
  {
    "objectID": "Unidad4.html#paquetes-utilizados-en-esta-lección",
    "href": "Unidad4.html#paquetes-utilizados-en-esta-lección",
    "title": "Unidad 4: Interpolación espacial y Geoestadística",
    "section": "Paquetes utilizados en esta lección",
    "text": "Paquetes utilizados en esta lección\n\nlibrary(sf)\nlibrary(tidyverse)\nlibrary(tmap)\nlibrary(raster)\nlibrary(stars)\nlibrary(gstat)\nlibrary(spgwr)\nlibrary(dismo)\nlibrary(fields)\nlibrary(automap)"
  },
  {
    "objectID": "Unidad4.html#actividad-1-interpolación-basada-en-métodos-determinísticos",
    "href": "Unidad4.html#actividad-1-interpolación-basada-en-métodos-determinísticos",
    "title": "Unidad 4: Interpolación espacial y Geoestadística",
    "section": "Actividad 1: Interpolación basada en métodos determinísticos",
    "text": "Actividad 1: Interpolación basada en métodos determinísticos\n\nEstos ejercicios se realizaron junto con Pablo Tenelanda Y Damián Tuba.\n\nCargue las capas Temperatura_2.tif y recórtela hasta 200 metros más que la extensión de la capa muestreo.gpkg:: Puntos de muestreo. Y a partir de esos datos genere:\n\npuntos <- st_read(\"data/gpkg/muestreo.gpkg\", \"Puntos de muestreo\", quiet = TRUE)\n\npuntos <- puntos |> \n  mutate(x = st_coordinates(puntos)[, \"X\"], y = st_coordinates(puntos)[, \"Y\"]) |> \n  as_Spatial()\n\ntemp2 <- raster(\"data/tif/Temperatura_2.tif\")\n\nCreamos el buffer de al rededor de los puntos:\n\nmascara <- st_bbox(puntos) |> \n  st_as_sfc(crs = st_crs(puntos)) |> #convertir el bbox a polígono\n  st_buffer(200) |>  # Crear un buffer de 200 m alrededor del bbox\n  as_Spatial() \n\nRecortamos la capa de temperatura con los límites de los puntos de muestreo:\n\n\ntemplate <- temp2 %>% \n  crop(mascara) %>% \n  as(\"SpatialPixelsDataFrame\")\n\nRevisamos el resultado\n\ntemplate |> plot()\npuntos |> plot(add = T)\n\n\n\n\n\n\n\n\n\n\nModelo de tendencia espacial de los datos mediante un polinomio de segundo orden (modelo cuadrático). Puede usar la fórmula: variable ~ x + y + I(x*y) + I(x^2) + I(y^2)\n\n\nspatial_model <- krige(\n  ta_media ~ x + y + I(x*y)+ I(x^2)+I(y^2), puntos, template\n)\n\n[ordinary or weighted least squares prediction]\n\nspplot(spatial_model ,\"var1.pred\",\n       main= \"Tendencia (2do orden)\")\n\n\n\n\n\nDiagrama de Voronoi.\n\nA continuación se presenta los diagramas de voronoi con el paquete dismo y con una interpolación de kriging simple.\n\ndismo::voronoi(coordinates(puntos)) %>% \n  plot(main = \"Polígonos de Voronoi\")\n\nLoading required namespace: deldir\n\nkrige(ta_media ~ 1, puntos, template, nmax=1, set=list(idp = 0), debug.level = 0) |>\n  spplot(\"var1.pred\", main= \"1 vecino próximo\")\n\n\n\n\n\n\n\n\n\n\n\n\nInterpolación ponderada por el inverso de la distancia\n\n\nidw(\n  ta_media ~ 1, puntos, template, nmax = 5, idp = 2, debug.level = 0\n) |> spplot(\"var1.pred\", main= \"Inverse Distance Weighting\")\n\n\n\n\n\nInterpolación Thin Plate\n\nCon la función Tps y las coordenadas de la capa puntos como la matriz de variable independientes se crea el modelo, que luego es ingresado junto al raster template en la función interpolate.\n\ntps_model <- fields::Tps(coordinates(puntos), puntos$ta_media)\ntps_grid <- interpolate(raster(template), tps_model)\nspplot(tps_grid, main = \"Thin plate spline\")"
  },
  {
    "objectID": "Unidad4.html#actividad-2-predicción-modelos-regresivos",
    "href": "Unidad4.html#actividad-2-predicción-modelos-regresivos",
    "title": "Unidad 4: Interpolación espacial y Geoestadística",
    "section": "Actividad 2: Predicción Modelos regresivos",
    "text": "Actividad 2: Predicción Modelos regresivos\nCargue las capas modis_perc_bosque_2010_clip.tif y dem200s.tif. Recórtelas tal como lo hizo con la capa de temperatura.\n\nAjuste un modelo de regresión geográficamente ponderada (GWR) con las variables “ta_media” como dependiente y “Altitud” + “Forest_P_2010” como independientes\nDescriba el resultado.\nGenere las capas de valores beta.\nMediante álgebra de mapas genere la predicción para la variable de temperatura, usando las capas beta y las variables independientes ."
  },
  {
    "objectID": "Unidad4.html#actividad-3.-predicción-geoestadística",
    "href": "Unidad4.html#actividad-3.-predicción-geoestadística",
    "title": "Unidad 4: Interpolación espacial y Geoestadística",
    "section": "Actividad 3. Predicción Geoestadística",
    "text": "Actividad 3. Predicción Geoestadística\n\nA partir de los mismos datos de muestreo genere el semivariograma experimental.\n\n\nv <- variogram(ta_media ~ 1, locations = puntos)\nplot(v)\n\n\n\n\n\nAjuste un modelo teórico que más considere pertinente al semivariograma, y justifique por qué utilizó ese Modelo teórico.\n\nPara ajustar el modelo vamos a revisar los disponibles\n\ngstat::show.vgms()\n\n\n\n\nEntre los que mejor se ajustan al semivariograma experimental están “Sph”, “Cir” y “Pen”\n\nplot(v, model = fit.variogram(v, model = vgm(model = \"Sph\")))\nplot(v, model = fit.variogram(v, model = vgm(model = \"Cir\")))\nplot(v, model = fit.variogram(v, model = vgm(model = \"Pen\")))\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nEl mejor modelo de variograma que se ajusta, tanto para distancias cortas como para distancias largas, es el modelo “Pen”\n\nfit.v <- fit.variogram(v, model = vgm(model = \"Pen\"))\nplot(v, model = fit.v)\n\n\n\n\n\nGenere los resultados de predicción con los tres tipos de Krigin (Va a necesitar ajustar un semivariograma adicional)\n\n\nKriging simple\n\n\nsimple_krige <- krige(ta_media ~ 1, puntos, template, model = fit.v, \n            beta = mean(puntos$ta_media))\n\n[using simple kriging]\n\n\n\nKriging Ordinario\n\n\nordinary_krige <- krige(ta_media ~ 1, locations = puntos, newdata = template,\n            model = fit.v)\n\n[using ordinary kriging]\n\n\n\nKriging Universal\n\n\nuniversal_krige <- krige(ta_media ~ x + y, puntos, template, \n            model = automap::autofitVariogram(ta_media ~ x + y, puntos)$var_model, \n            block = c(100, 100))\n\n[using universal kriging]\n\n\n\nspplot(simple_krige, \"var1.pred\", main = \"Simple\")\nspplot(ordinary_krige, \"var1.pred\", main = \"Ordinario\")\nspplot(universal_krige, \"var1.pred\", main = \"Universal\")"
  }
]